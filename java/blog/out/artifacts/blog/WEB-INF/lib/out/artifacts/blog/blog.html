<!DOCTYPE HTML>
<html>
	<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="author" content="" />
  	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content=""/>
	<meta property="og:image" content=""/>
	<meta property="og:url" content=""/>
	<meta property="og:site_name" content=""/>
	<meta property="og:description" content=""/>
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<link href='https://fonts.googleapis.com/css?family=Work+Sans:400,300,600,400italic,700' rel='stylesheet' type='text/css'>
	<link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,700" rel="stylesheet">
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">
	<!-- Theme style  -->
	<link rel="stylesheet" href="css/style.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
	<script src="js/respond.min.js"></script>

	<![endif]-->

	</head>
	<body>
		
	<div class="fh5co-loader"></div>
	
	<div id="page">
	<nav class="fh5co-nav" role="navigation">
		<div class="container">
			<div class="row">
				<div class="col-xs-5 text-right menu-1">
					<ul>
						<li><a href="work.html">个人中心</a></li>
						<li><a href="about.html">添加图书</a></li>
<!--						<li class="has-dropdown">-->
<!--							<a href="services.html">Services</a>-->
<!--							<ul class="dropdown">-->
<!--								<li><a href="#">Web Design</a></li>-->
<!--								<li><a href="#">eCommerce</a></li>-->
<!--								<li><a href="#">Branding</a></li>-->
<!--								<li><a href="#">API</a></li>-->
<!--							</ul>-->
<!--						</li>-->
					</ul>
				</div>
				<div class="col-xs-2 text-center">
					<div id="fh5co-logo"><a href="index2.html">首页.</a></div>
				</div>
				<div class="col-xs-5 text-left menu-1">
					<ul>
						<li class="active"><a href="blog.html">Blog</a></li>
<!--						<li class="has-dropdown">-->
<!--							<a href="#">Tools</a>-->
<!--							<ul class="dropdown">-->
<!--								<li><a href="#">HTML5</a></li>-->
<!--								<li><a href="#">CSS3</a></li>-->
<!--								<li><a href="#">Sass</a></li>-->
<!--								<li><a href="#">jQuery</a></li>-->
<!--							</ul>-->
<!--						</li>-->
						<li><a href="/blog/logout">登出</a></li>
					</ul>
				</div>
			</div>
			
		</div>
	</nav>

	<header id="fh5co-header" class="fh5co-cover fh5co-cover-sm" role="banner" style="background-image:url(images/img_bg_2.jpg);">
		<div class="overlay"></div>
		<div class="container">
			<div class="row">
				<div class="col-md-8 col-md-offset-2 text-center">
					<div class="display-t">
						<div class="display-tc animate-box" data-animate-effect="fadeIn">
							<h1>KK 博客</h1>
							<h2>lj'classdesign for javaweb <a href="http://sc.chinaz.com/" target="_blank"></a></h2>
							<div class="row">
								<form class="form-inline" id="fh5co-header-subscribe">
									<div class="col-md-6 col-md-offset-3">
										<div class="form-group">
											<input type="text" class="form-control" id="searchPoints" placeholder="关键字：作者、标题、内容" onchange="newButton()">
											<button type="button" id="searchButton" onclick="showBooks('searchlist',1)" class="btn btn-default">搜索</button>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</header>


	<div id="fh5co-blog" class="fh5co-bg-section">
		<div class="container">
<!--			用单引号传字符串-->
			<center>
			<button onclick="showBooks('page',1)" id="show1">第1页</button>
			<button onclick="showBooks('page',2)" id="show2">第2页</button>
			<button onclick="showBooks('page',3)" id="show3">第3页</button>
			<button onclick="showBooks('page',4)" id="show4">第4页</button>
			</center>
			<div class="row" id="textTable">
<!--				等待填充-->
			</div>
		</div>
	</div>



	<div id="fh5co-started">
		<div class="container">
			<div class="row animate-box">
				<div class="col-md-8 col-md-offset-2 text-center fh5co-heading">
					<h2>Lets Get Started</h2>
					<p>Dignissimos asperiores vitae velit veniam totam fuga molestias accusamus alias autem provident. Odit ab aliquam dolor eius.</p>
				</div>
			</div>
			<div class="row animate-box">
				<div class="col-md-8 col-md-offset-2">
					<form class="form-inline">
						<div class="col-md-6 col-md-offset-3 col-sm-6">
							<button type="submit" class="btn btn-default btn-block">Get In Touch</button>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

	<footer id="fh5co-footer" role="contentinfo">
		<div class="container">
			<div class="row row-pb-md">
				<div class="col-md-2 col-sm-4 col-xs-6">
					<ul class="fh5co-footer-links">
						<li><a href="#">About</a></li>
						<li><a href="#">Help</a></li>
						<li><a href="#">Contact</a></li>
						<li><a href="#">Terms</a></li>
						<li><a href="#">Meetups</a></li>
					</ul>
				</div>

				<div class="col-md-2 col-sm-4 col-xs-6">
					<ul class="fh5co-footer-links">
						<li><a href="#">Shop</a></li>
						<li><a href="#">Privacy</a></li>
						<li><a href="#">Testimonials</a></li>
						<li><a href="#">Handbook</a></li>
						<li><a href="#">Held Desk</a></li>
					</ul>
				</div>

				<div class="col-md-2 col-sm-4 col-xs-6">
					<ul class="fh5co-footer-links">
						<li><a href="#">Find Designers</a></li>
						<li><a href="#">Find Developers</a></li>
						<li><a href="#">Teams</a></li>
						<li><a href="#">Advertise</a></li>
						<li><a href="#">API</a></li>
					</ul>
				</div>
				<div class="col-md-4 col-sm-12 col-xs-12 fh5co-widget col-md-push-1">
					<h3>A Little About Orange</h3>
					<p>Facilis ipsum reprehenderit nemo molestias. Aut cum mollitia reprehenderit. Eos cumque dicta adipisci architecto culpa amet.</p>
					<p><a href="#">Learn More</a></p>
				</div>
			</div>

			<div class="row copyright">
				<div class="col-md-12 text-center">
					<p>
						<small class="block">Copyright &copy; <a href="https://www.genban.org/" >网站模板</a>.</small> 
					</p>
					<p>
						<ul class="fh5co-social-icons">
							<li><a href="#"><i class="icon-twitter"></i></a></li>
							<li><a href="#"><i class="icon-facebook"></i></a></li>
							<li><a href="#"><i class="icon-linkedin"></i></a></li>
							<li><a href="#"><i class="icon-dribbble"></i></a></li>
						</ul>
					</p>
				</div>
			</div>

		</div>
	</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
	</div>
	
	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>


	</body>


	<script lang="javascript">
		window.onload=empty();
		function empty(){
			var urlname = getUrlParam("type")
			if (urlname==null) {
				showBooks('page', 1);
			}else if (urlname!=null){
				showBooks('searchlist',1);
			}
		};

		// 当按了搜索按钮时，改变下面页数的button属性
		function newButton(){
			$("#show1").attr("onclick","showBooks('searchlist',1)");
			$("#show2").attr("onclick","showBooks('searchlist',2)");
			$("#show3").attr("onclick","showBooks('searchlist',3)");
			$("#show4").attr("onclick","showBooks('searchlist',4)");
			console.log("newButton");
		}

		function getUrlParam(name) {
			var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
			var r = window.location.search.substr(1).match(reg);  //匹配目标参数
			if (r != null) return unescape(r[2]);
			return null; //返回参数值
		}
		function showBooks(type,page) {
			if (type=="page") {
				$.ajax({
					url: "/blog/Listjson?page=" + page,
					method: "GET",
					dataType: "json"
				}).done(function (result) {
					console.log(result.texts)
					updateBookTable(result.texts);
				}).fail(function (xhr, status) {
					console.log(status);
				});
				console.log("page");
			}else if (type=="searchlist"){
				var point=$("#searchPoints").val();
				var urlname = getUrlParam("type")
				if (urlname==null) {
					$.ajax({
						url: "/blog/Listjson?searchpage=" + page + "&&searchPoints=" + point,
						method: "GET",
						dataType: "json"
					}).done(function (result) {
						console.log(result.texts)
						updateBookTable(result.texts);
					}).fail(function (xhr, status) {
						console.log(status);
					});
				}else if (urlname=="pe"){
					$.ajax({
						url: "/blog/Listjson?searchpage=" + page + "&&searchPoints=" + point +"&&type="+urlname,
						method: "GET",
						dataType: "json"
					}).done(function (result) {
						console.log(result.texts);
						newButton();
						updateBookTable(result.texts);
					}).fail(function (xhr, status) {
						console.log(status);
					});
				}else if (urlname=="daylife"){
					$.ajax({
						url: "/blog/Listjson?searchpage=" + page + "&&searchPoints=" + point +"&&type="+urlname,
						method: "GET",
						dataType: "json"
					}).done(function (result) {
						console.log(result.texts);
						newButton();
						updateBookTable(result.texts);
					}).fail(function (xhr, status) {
						console.log(status);
					});
				}else if (urlname=="science"){
					$.ajax({
						url: "/blog/Listjson?searchpage=" + page + "&&searchPoints=" + point +"&&type="+urlname,
						method: "GET",
						dataType: "json"
					}).done(function (result) {
						console.log(result.texts);
						newButton();
						updateBookTable(result.texts);
					}).fail(function (xhr, status) {
						console.log(status);
					});
				}else if (urlname=="news"){
					$.ajax({
						url: "/blog/Listjson?searchpage=" + page + "&&searchPoints=" + point +"&&type="+urlname,
						method: "GET",
						dataType: "json"
					}).done(function (result) {
						console.log(result.texts);
						newButton();
						updateBookTable(result.texts);
					}).fail(function (xhr, status) {
						console.log(status);
					});
				}else if (urlname=="scenery"){
					$.ajax({
						url: "/blog/Listjson?searchpage=" + page + "&&searchPoints=" + point +"&&type="+urlname,
						method: "GET",
						dataType: "json"
					}).done(function (result) {
						console.log(result.texts);
						newButton();
						updateBookTable(result.texts);
					}).fail(function (xhr, status) {
						console.log(status);
					});
				}else if (urlname=="music"){
					$.ajax({
						url: "/blog/Listjson?searchpage=" + page + "&&searchPoints=" + point +"&&type="+urlname,
						method: "GET",
						dataType: "json"
					}).done(function (result) {
						console.log(result.texts);
						newButton();
						updateBookTable(result.texts);
					}).fail(function (xhr, status) {
						console.log(status);
					});
				}
			}

		}
		function updateBookTable(texts) {
			var t = $("#textTable");
			t.empty();
			for (var i=0; i<texts.length; i++) {
				var b = texts[i];
				var div=$("<div class=\"col-lg-4 col-md-4\">");
				var div2=$("<div class=\"fh5co-blog animate-box fadeInUp animated-fast\">")
				var div3=$("<div class=\"blog-text\">");
				//div.append("<div class=\"fh5co-blog animate-box fadeInUp animated-fast\">");
				div2.append("<img class=\"img-responsive\" src=\"/blog/upload/"+b.pics+"\">");//这里注意一定要格式一正确，格式错误的会产生几种意向不到的错误，比如源代码根本显示不出来，或者根本没有图片
				//div2.append("<img class=\"img-responsive\" src=\"/blog/upload/OIP-C.jpg\">");
				//div2.append("<img class=\"img-responsive\" src=\"images/work-4.jpg\">");//为什么动态就不行了
				//div2.append("<div class=\"blog-text\">");
				div3.append("<h3><a href=\"\"#>"+b.title+"</a></h3>");
				div3.append("<span class=\"posted_on\">"+b.type+"</span>");
				div3.append("<span class=\"comment\"><a href=\"\">21<i class=\"icon-speech-bubble\"></i></a></span>");
				div3.append("<div style='width: 300px; height: 27px;text-overflow: ellipsis;white-space: nowrap; overflow: hidden;display: block'>"+b.content+"</div>");
				div3.append("<a href=\"read.jsp?id="+b.id+"\" class=\"btn btn-primary\">Read More</a>")
				div3.append("</div>");
				div2.append("</div>");
				div.append("</div>");
				div2.append(div3);
				div.append(div2);
				console.log(div);
				console.log(b.pics);
				t.append(div);

			}

		}
		</script>
</html>

